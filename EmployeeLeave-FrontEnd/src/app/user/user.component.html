<div class="m-3">
  <h1>Welcome {{ this.userName}}</h1>
  <p class="mt-2">
    You have {{ this.pendingRequests }} pending leave requests, {{ this.approvedRequests }} approved leave requests
    and {{ this.declinedRequests }} declined leave requests.
  </p>

  <div class="my-5">
    <h2>Apply for leave</h2>
    <form (ngSubmit)="onSubmit()" #requestForm="ngForm">
      <div>
        <label for="leaveTypeID">Leave Type:</label>
        <select id="leaveTypeID" name="leaveTypeID" [(ngModel)]="newRequest.leaveTypeID" required>
          <option *ngFor="let type of leaveTypes" [value]="type.leaveTypeID">{{ type.name }}</option>
        </select>
      </div>
      <div>
        <label for="startDate">Start Date:</label>
        <input type="datetime-local" id="startDate" name="startDate" [(ngModel)]="newRequest.startDate" required>
      </div>
      <div>
        <label for="endDate">End Date:</label>
        <input type="datetime-local" id="endDate" name="endDate" [(ngModel)]="newRequest.endDate" required>
      </div>
      <div>
        <button type="submit" class="btn btn-primary">Apply for leave</button>
      </div>
    </form>
  </div>

  <h2>Current leave requests</h2>
  <div class="request-container">
    <table class="table request-table">
      <thead>
        <tr>
          <th>Leave Type</th>
          <th>Leave Status</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th></th> 
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of requests">
          <td>{{ getLeaveTypeName(item.leaveTypeID) }}</td>
          <td>{{ item.leaveStatus }}</td>
          <td>{{ item.startDate.split('T')[0] }}</td>
          <td>{{ item.endDate.split('T')[0] }}</td>
          <td>
            <button (click)="deleteRequest(item.requestID)" class="btn btn-danger">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
